<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Broomstick Runner ‚Äî Empneo</title>
<style>
  :root{
    --bg1: #071025;
    --bg2: #0f1630;
    --accent: #ffd166;
    --danger: #ff6b6b;
    --muted: #c0c6d9;
    --glass: rgba(255,255,255,0.04);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    font-family: "Segoe UI", Roboto, system-ui, -apple-system;
    background: linear-gradient(180deg,var(--bg1),var(--bg2));
    color:#eef2ff;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:18px;
  }

  .wrap{
    width:100%;
    max-width:980px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:14px;
    overflow:hidden;
    box-shadow:0 20px 60px rgba(2,6,23,0.6);
    display:grid;
    grid-template-columns: 1fr 320px;
    gap:0;
  }

  /* Game area */
  #gameArea{
    position:relative;
    background: radial-gradient(ellipse at top, rgba(255,230,150,0.02) 0%, transparent 20%),
                linear-gradient(180deg,#021028 0%, #06102a 50%, #081229 100%);
    min-height:600px;
  }
  canvas{ display:block; width:100%; height:100%; }

  /* Sidebar */
  .panel{
    padding:18px;
    border-left:1px solid rgba(255,255,255,0.03);
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
  }
  .title{ font-size:20px; font-weight:700; color:var(--accent); margin-bottom:6px; font-family: 'Cinzel', serif; }
  .desc{ font-size:13px; color:var(--muted); margin-bottom:14px }
  .stat{ display:flex; justify-content:space-between; padding:10px 12px; background:var(--glass); border-radius:10px; margin-bottom:10px; align-items:center }
  .big{ font-size:22px; font-weight:700; color:#fff }
  .small{ font-size:12px; color:var(--muted) }

  .controls{ display:flex; gap:8px; margin-top:10px; flex-wrap:wrap }
  .btn{
    background:linear-gradient(180deg,var(--accent), #e6b23a);
    color:#120b00;
    border:none; padding:10px 12px; border-radius:10px; cursor:pointer; font-weight:700;
    box-shadow: 0 8px 20px rgba(0,0,0,0.45);
  }
  .btn.secondary{ background:transparent; border:1px solid rgba(255,255,255,0.04); color:var(--muted); box-shadow:none }

  .hint{ margin-top:14px; font-size:12px; color:var(--muted) }
  .footer{ margin-top:18px; font-size:12px; color:var(--muted) }

  /* mobile layout */
  @media (max-width:920px){
    .wrap{ grid-template-columns: 1fr; }
    .panel{ order:2 }
    #gameArea{ min-height:520px }
  }
</style>
</head>
<body>

<div class="wrap" role="application" aria-label="Broomstick Runner Game">
  <div id="gameArea">
    <canvas id="gameCanvas"></canvas>

    <!-- HUD overlay -->
    <div id="hud" style="position:absolute;left:12px;top:12px;display:flex;gap:8px;align-items:center;">
      <div style="background:rgba(0,0,0,0.35);padding:8px 12px;border-radius:10px;font-weight:700;">
        Score: <span id="score">0</span>
      </div>
      <div style="background:rgba(0,0,0,0.35);padding:8px 12px;border-radius:10px;">
        Lives: <span id="lives">3</span>
      </div>
    </div>

    <!-- start overlay -->
    <div id="overlay" style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:auto;">
      <div style="text-align:center;background:linear-gradient(180deg,rgba(0,0,0,0.45), rgba(0,0,0,0.25));padding:30px;border-radius:12px;">
        <h1 style="margin:0 0 8px;font-family:'Cinzel',serif;color:var(--accent)">Broomstick Runner</h1>
        <p style="margin:0 0 16px;color:var(--muted)">Dodge Dementors, catch Golden Snitches, and survive as long as you can. Use ‚Üê ‚Üí or touch/tilt to move. üßπ‚ö°</p>
        <div style="display:flex;gap:10px;justify-content:center">
          <button class="btn" id="startBtn">Start Game</button>
          <button class="btn secondary" id="howBtn">How to Play</button>
        </div>
      </div>
    </div>
  </div>

  <aside class="panel" aria-label="Game controls and stats">
    <div class="title">Broomstick Runner</div>
    <div class="desc">Endless runner set in a magical night sky. Collect snitches to increase score. Avoid dark creatures ‚Äî colliding costs lives.</div>

    <div class="stat"><div class="small">Current Score</div><div class="big" id="sideScore">0</div></div>
    <div class="stat"><div class="small">High Score</div><div class="big" id="hiScore">0</div></div>
    <div class="stat"><div class="small">Lives</div><div class="big" id="sideLives">3</div></div>

    <div style="margin-top:12px;">
      <div style="font-weight:700;margin-bottom:6px">Controls</div>
      <div class="small">Desktop: ‚Üê and ‚Üí keys to move. Space = boost. Mobile: touch & drag or tilt phone.</div>
      <div class="small" style="margin-top:6px">Power-ups: Golden Snitch (score), Shield (temporary invulnerability), Speed Burst.</div>
    </div>

    <div class="controls">
      <button class="btn" id="pauseBtn">Pause</button>
      <button class="btn secondary" id="muteBtn">Mute Sound</button>
      <button class="btn secondary" id="resetBtnSide">Reset</button>
    </div>

    <div class="hint">Tip: Collect snitches to build combo multipliers. Survive long ‚Äî difficulty increases over time.</div>

    <div class="footer">Built for Empneo ‚Ä¢ Replace assets with your own for demo</div>
  </aside>
</div>

<!-- Audio placeholders -->
<audio id="sfxCollect"><source src="https://cdn.jsdelivr.net/gh/anars/blank-audio@master/1-second-of-silence.mp3" type="audio/mpeg"></audio>
<audio id="sfxHit"><source src="https://cdn.jsdelivr.net/gh/anars/blank-audio@master/1-second-of-silence.mp3" type="audio/mpeg"></audio>
<audio id="bgLoop" loop><source src="https://cdn.jsdelivr.net/gh/anars/blank-audio@master/1-second-of-silence.mp3" type="audio/mpeg"></audio>

<script>
/*
  Broomstick Runner ‚Äî simple but polished canvas game
  Features:
  - Player broom moves horizontally, obstacles spawn and move downward
  - Collectibles (Snitches) increase score and combos
  - Power-ups: shield, speed
  - Lives and high score in localStorage
  - Keyboard + touch + device orientation controls
  - Particle effects + basic collision
*/

/* ---------- Setup ---------- */
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d', {alpha:true});
let W = canvas.width = canvas.clientWidth;
let H = canvas.height = canvas.clientHeight;

function resize(){
  W = canvas.width = canvas.clientWidth;
  H = canvas.height = canvas.clientHeight;
}
window.addEventListener('resize', resize);

/* HUD */
const scoreEl = document.getElementById('score');
const livesEl = document.getElementById('lives');
const sideScore = document.getElementById('sideScore');
const hiScoreEl = document.getElementById('hiScore');
const sideLives = document.getElementById('sideLives');

/* Overlays and controls */
const overlay = document.getElementById('overlay');
const startBtn = document.getElementById('startBtn');
const howBtn = document.getElementById('howBtn');
const pauseBtn = document.getElementById('pauseBtn');
const muteBtn = document.getElementById('muteBtn');
const resetBtnSide = document.getElementById('resetBtnSide');

const sfxCollect = document.getElementById('sfxCollect');
const sfxHit = document.getElementById('sfxHit');
const bgLoop = document.getElementById('bgLoop');

/* ---------- Game state ---------- */
let running = false;
let paused = false;
let mute = false;

let score = 0;
let lives = 3;
let hiScore = Number(localStorage.getItem('broom_hi') || 0);

hiScoreEl.textContent = hiScore;

let player = {
  x: 0, y:0, w:64, h:24,
  vx:0,
  speed: 600, // px per second
  shield: 0, // seconds
  boost: 0
};

let obstacles = []; // Dementors
let items = []; // Snitches or powerups
let particles = [];

let spawnTimer = 0;
let spawnInterval = 1.1; // seconds
let difficulty = 1; // scales with time
let elapsed = 0;

/* ---------- Helpers ---------- */
const rand = (a,b)=> Math.random()*(b-a)+a;
const clamp = (v,a,b)=> Math.max(a, Math.min(b,v));
function rectsOverlap(a,b){
  return a.x < b.x + b.w && a.x + a.w > b.x && a.y < b.y + b.h && a.y + a.h > b.y;
}
function playSound(el){
  if(mute) return;
  try{ el.currentTime = 0; el.play().catch(()=>{}); }catch(e){}
}

/* ---------- Particles ---------- */
function spawnParticles(x,y,color,count=8){
  for(let i=0;i<count;i++){
    particles.push({
      x,y,
      vx: rand(-120,120),
      vy: rand(-220,-40),
      life: rand(0.6,1.2),
      t:0,
      size: rand(2,6),
      color
    });
  }
}

/* ---------- Game objects ---------- */
function spawnObstacle(){
  // Dementor-like shadow
  const w = rand(44,96);
  const x = rand(16, W - 16 - w);
  obstacles.push({
    x, y: -120, w, h: w*0.6,
    vy: rand(120, 200) * difficulty,
    rot: rand(-0.2,0.2),
    hp:1
  });
}

function spawnSnitch(){
  // golden collectible
  const size = 28;
  const x = rand(16, W - 16 - size);
  items.push({
    type:'snitch',
    x, y:-60, w:size, h:size,
    vy: rand(100,160) * difficulty,
    rot:0
  });
}

function spawnPowerup(){
  const types = ['shield','speed'];
  const type = types[Math.floor(Math.random()*types.length)];
  const size = 36;
  const x = rand(16, W - 16 - size);
  items.push({
    type,
    x, y:-60, w:size, h:size,
    vy: rand(110,140) * difficulty,
    rot:0
  });
}

/* ---------- Controls ---------- */
let input = { left:false, right:false, boost:false, touchX:null };
window.addEventListener('keydown', (e)=>{
  if(e.key === 'ArrowLeft') input.left = true;
  else if(e.key === 'ArrowRight') input.right = true;
  else if(e.key === ' '){ input.boost = true; }
});
window.addEventListener('keyup', (e)=>{
  if(e.key === 'ArrowLeft') input.left = false;
  else if(e.key === 'ArrowRight') input.right = false;
  else if(e.key === ' '){ input.boost = false; }
});

/* touch drag */
canvas.addEventListener('touchstart', (ev)=>{
  const t = ev.touches[0]; input.touchX = t.clientX;
});
canvas.addEventListener('touchmove', (ev)=>{
  ev.preventDefault();
  const t = ev.touches[0]; input.touchX = t.clientX;
});
canvas.addEventListener('touchend', (ev)=>{ input.touchX = null; });

/* device tilt */
window.addEventListener('deviceorientation', (e)=>{
  // gamma is left-right tilt in degrees [-90,90]
  if(Math.abs(e.gamma) > 2){
    // map -30..30 to -1..1
    input.tilt = clamp(e.gamma / 30, -1, 1);
  }
});

/* ---------- Game lifecycle ---------- */
function resetGame(){
  score = 0; lives = 3; difficulty = 1; elapsed = 0;
  obstacles = []; items = []; particles = [];
  spawnTimer = 0; spawnInterval = 1.1;
  player.shield = 0; player.boost = 0;
  player.x = W/2 - player.w/2; player.y = H - 140;
  updateHUD();
}

function startGame(){
  resetGame();
  running = true; paused = false;
  overlay.style.display = 'none';
  if(!mute){ bgLoop.volume = 0.12; bgLoop.play().catch(()=>{}); }
  lastTime = performance.now();
  loop(lastTime);
}

function endGame(){
  running = false;
  overlay.style.display = 'flex';
  // show summary on overlay
  // save hi score
  if(score > hiScore){ hiScore = score; localStorage.setItem('broom_hi', hiScore); hiScoreEl.textContent = hiScore; }
  document.getElementById('sideScore').textContent = score;
}

/* ---------- HUD ---------- */
function updateHUD(){
  scoreEl.textContent = Math.floor(score);
  sideScore.textContent = Math.floor(score);
  livesEl.textContent = lives;
  sideLives.textContent = lives;
  hiScoreEl.textContent = hiScore;
}

/* ---------- Main loop ---------- */
let lastTime = null;
function loop(now){
  if(!running) return;
  if(paused){ lastTime = now; requestAnimationFrame(loop); return; }
  const dt = Math.min(0.033, (now - lastTime) / 1000); // clamp dt
  lastTime = now;
  elapsed += dt;

  // increase difficulty gradually
  difficulty = 1 + Math.min(3, elapsed / 40);
  spawnInterval = 1.1 - Math.min(0.7, elapsed / 120);

  // spawn logic
  spawnTimer -= dt;
  if(spawnTimer <= 0){
    spawnTimer = spawnInterval;
    const r = Math.random();
    if(r < 0.56){
      spawnObstacle();
    } else if(r < 0.85){
      spawnSnitch();
    } else {
      spawnPowerup();
    }
  }

  // update player position
  let targetV = 0;
  if(input.left) targetV -= 1;
  if(input.right) targetV += 1;
  if(input.touchX != null){
    // set target based on touch x
    const tx = input.touchX - canvas.getBoundingClientRect().left;
    const dir = (tx - (player.x + player.w/2)) / (W/2);
    targetV = clamp(dir * 1.6, -1, 1);
  }
  if(input.tilt) targetV += input.tilt * 0.8;

  // handle boost input
  if(input.boost) { player.boost = Math.min(1.2, player.boost + dt * 2); } else { player.boost = Math.max(0, player.boost - dt * 1.8); }

  const speed = player.speed * (1 + player.boost*0.6);
  player.vx = targetV * speed;
  player.x += player.vx * dt;
  player.x = clamp(player.x, 8, W - player.w - 8);

  // update obstacles
  for(let i=obstacles.length-1;i>=0;i--){
    const o = obstacles[i];
    o.y += o.vy * dt;
    o.rot += 0.4 * dt;
    if(o.y > H + 120){ obstacles.splice(i,1); continue; }
    // collision
    const pbox = {x:player.x, y:player.y, w:player.w, h:player.h};
    if(rectsOverlap(pbox, o)){
      if(player.shield > 0){
        // shield absorbs
        obstacles.splice(i,1);
        spawnParticles(o.x + o.w/2, o.y + o.h/2, '#9fbfdf', 10);
        playSound(sfxCollect);
      } else {
        // lose life
        obstacles.splice(i,1);
        playSound(sfxHit);
        spawnParticles(player.x + player.w/2, player.y + player.h/2, '#ff6b6b', 16);
        lives--;
        updateHUD();
        if(lives <= 0){
          endGame();
          return;
        }
      }
    }
  }

  // update items
  for(let i=items.length-1;i>=0;i--){
    const it = items[i];
    it.y += it.vy * dt;
    it.rot += dt * 2;
    if(it.y > H + 80){ items.splice(i,1); continue; }
    // collision
    const pbox = {x:player.x, y:player.y, w:player.w, h:player.h};
    if(rectsOverlap(pbox, it)){
      if(it.type === 'snitch'){
        score += 50 + Math.floor(10 * (1 + elapsed/20));
        spawnParticles(it.x + it.w/2, it.y + it.h/2, '#ffd166', 12);
        playSound(sfxCollect);
      } else if(it.type === 'shield'){
        player.shield = Math.max(player.shield, 4);
        spawnParticles(it.x + it.w/2, it.y + it.h/2, '#9be7ff', 10);
        playSound(sfxCollect);
      } else if(it.type === 'speed'){
        player.boost = Math.max(player.boost, 0.8);
        spawnParticles(it.x + it.w/2, it.y + it.h/2, '#c8ffb2', 10);
        playSound(sfxCollect);
      }
      items.splice(i,1);
      updateHUD();
    }
  }

  // update shield and boost timers
  if(player.shield > 0) player.shield = Math.max(0, player.shield - dt);
  if(player.boost > 0) player.boost = Math.max(0, player.boost - dt * 0.8);

  // update particles
  for(let i=particles.length-1;i>=0;i--){
    const pt = particles[i];
    pt.t += dt;
    pt.x += pt.vx * dt;
    pt.y += pt.vy * dt;
    pt.vy += 300 * dt;
    if(pt.t > pt.life) particles.splice(i,1);
  }

  // update score over time
  score += dt * (1 + difficulty*0.8);
  updateHUD();

  // draw everything
  draw();

  requestAnimationFrame(loop);
}

/* ---------- Drawing ---------- */
function draw(){
  ctx.clearRect(0,0,W,H);

  // background stars
  drawBackground();

  // draw items (snitches & powerups)
  for(const it of items){
    ctx.save();
    ctx.translate(it.x + it.w/2, it.y + it.h/2);
    ctx.rotate(it.rot);
    if(it.type === 'snitch'){
      drawSnitch(-it.w/2, -it.h/2, it.w, it.h);
    } else if(it.type === 'shield'){
      drawShield(-it.w/2, -it.h/2, it.w, it.h);
    } else if(it.type === 'speed'){
      drawBolt(-it.w/2, -it.h/2, it.w, it.h);
    }
    ctx.restore();
  }

  // draw obstacles
  for(const o of obstacles){
    ctx.save();
    ctx.translate(o.x + o.w/2, o.y + o.h/2);
    ctx.rotate(o.rot);
    drawDementor(-o.w/2, -o.h/2, o.w, o.h);
    ctx.restore();
  }

  // draw player broom (hero)
  drawBroom(player.x, player.y, player.w, player.h, player.shield, player.boost);

  // particles
  for(const p of particles){
    const alpha = 1 - (p.t / p.life);
    ctx.fillStyle = p.color;
    ctx.globalAlpha = alpha;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
    ctx.fill();
    ctx.globalAlpha = 1;
  }
}

/* Background stars and parallax clouds */
let starSeed = [];
for(let i=0;i<80;i++){
  starSeed.push({x: Math.random(), y: Math.random(), s: Math.random()*1.6});
}
function drawBackground(){
  // night sky gradient already set by CSS; draw subtle stars
  for(const s of starSeed){
    const x = s.x * W;
    const y = (s.y*0.85 + 0.05) * H;
    ctx.fillStyle = 'rgba(255,255,255,' + (0.08 + s.s*0.08) + ')';
    ctx.fillRect(x, y, s.s*1.6, s.s*1.6);
  }
  // distant aurora band
  const g = ctx.createLinearGradient(0, H*0.1, 0, H*0.4);
  g.addColorStop(0, 'rgba(160,200,255,0.02)');
  g.addColorStop(1, 'rgba(160,200,255,0.00)');
  ctx.fillStyle = g;
  ctx.fillRect(0, H*0.06, W, H*0.34);
}

/* Simple shapes for sprites (replace with images if you want) */
function drawBroom(x,y,w,h,shield,boost){
  // shadow
  ctx.fillStyle = 'rgba(0,0,0,0.35)';
  ctx.beginPath();
  ctx.ellipse(x + w/2, y + h + 6, w*0.9, 8, 0, 0, Math.PI*2);
  ctx.fill();

  // broom body
  ctx.fillStyle = '#c19a6b';
  roundRect(ctx, x, y, w, h, 8, true, false);

  // handle
  ctx.strokeStyle = '#6b4a2d';
  ctx.lineWidth = 6;
  ctx.beginPath();
  ctx.moveTo(x + w*0.15, y + h*0.5);
  ctx.lineTo(x - 30, y + h*0.5 - 6);
  ctx.stroke();

  // boost flame
  if(boost > 0.01){
    const glow = Math.min(1, boost);
    ctx.fillStyle = 'rgba(255,210,120,' + (0.25*glow) + ')';
    ctx.beginPath();
    ctx.ellipse(x + w/2 + 6, y + h + 6, 18*glow, 8*glow, 0, 0, Math.PI*2);
    ctx.fill();
  }

  // shield ring
  if(shield > 0.01){
    ctx.strokeStyle = 'rgba(155,231,255,0.85)';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.ellipse(x + w/2, y + h/2, w*0.9, h*2.6, 0, 0, Math.PI*2);
    ctx.stroke();
  }
}

function drawDementor(x,y,w,h){
  // shadowy black shape with cloak
  const grd = ctx.createLinearGradient(x, y, x + w, y + h);
  grd.addColorStop(0, 'rgba(8,8,12,0.95)');
  grd.addColorStop(1, 'rgba(20,20,30,0.85)');
  ctx.fillStyle = grd;
  roundRect(ctx, x, y, w, h, 12, true, false);

  // tattered edges (simple)
  ctx.fillStyle = 'rgba(0,0,0,0.55)';
  for(let i=0;i<5;i++){
    ctx.fillRect(x + i*w*0.15, y + h - (i*6), 6, 12);
  }
}

function drawSnitch(x,y,w,h){
  // golden circle + wings
  ctx.fillStyle = '#ffd166';
  ctx.beginPath();
  ctx.ellipse(x + w/2, y + h/2, w/2, h/2, 0, 0, Math.PI*2);
  ctx.fill();

  // wings
  ctx.fillStyle = 'rgba(255,255,255,0.85)';
  ctx.beginPath();
  ctx.ellipse(x - 6, y + h/2, 10, 6, -0.6, 0, Math.PI*2);
  ctx.fill();
  ctx.beginPath();
  ctx.ellipse(x + w + 6, y + h/2, 10, 6, 0.6, 0, Math.PI*2);
  ctx.fill();
}

function drawShield(x,y,w,h){
  ctx.fillStyle = '#9be7ff';
  roundRect(ctx, x, y, w, h, 8, true, false);
  ctx.fillStyle = '#063a4f';
  ctx.font = 'bold 12px sans-serif';
  ctx.fillText('Shield', x + 6, y + h/2 + 4);
}

function drawBolt(x,y,w,h){
  ctx.fillStyle = '#c8ffb2';
  ctx.beginPath();
  ctx.moveTo(x + w*0.2, y + h*0.1);
  ctx.lineTo(x + w*0.6, y + h*0.15);
  ctx.lineTo(x + w*0.3, y + h*0.9);
  ctx.lineTo(x + w*0.7, y + h*0.35);
  ctx.lineTo(x + w*0.4, y + h*0.35);
  ctx.closePath();
  ctx.fill();
}

/* utility rounded rect */
function roundRect(ctx, x, y, w, h, r, fill, stroke) {
  if (typeof stroke === 'undefined') { stroke = true; }
  if (typeof r === 'undefined') { r = 5; }
  ctx.beginPath();
  ctx.moveTo(x + r, y);
  ctx.arcTo(x + w, y, x + w, y + h, r);
  ctx.arcTo(x + w, y + h, x, y + h, r);
  ctx.arcTo(x, y + h, x, y, r);
  ctx.arcTo(x, y, x + w, y, r);
  ctx.closePath();
  if (fill) ctx.fill();
  if (stroke) ctx.stroke();
}

/* ---------- UI / Buttons ---------- */
startBtn.addEventListener('click', ()=>{
  startGame();
});

howBtn.addEventListener('click', ()=>{
  alert('Controls:\\n- Desktop: Left / Right arrows to move, Space to boost.\\n- Mobile: Touch and drag horizontally or tilt device.\\nCollect Golden Snitches for points, avoid Dementors. Shields and Speed powerups help you survive.');
});

pauseBtn.addEventListener('click', ()=>{
  if(!running) return;
  paused = !paused;
  pauseBtn.textContent = paused ? 'Resume' : 'Pause';
});

muteBtn.addEventListener('click', ()=>{
  mute = !mute;
  muteBtn.textContent = mute ? 'Unmute' : 'Mute Sound';
  if(mute) bgLoop.pause(); else if(running) bgLoop.play().catch(()=>{});
});

resetBtnSide.addEventListener('click', ()=>{
  resetGame();
});

document.getElementById('startBtn').addEventListener('click', ()=>{ /* already handled */ });

/* ---------- Initialize player position and start overlay */ */
function init(){
  resize();
  player.x = W/2 - player.w/2;
  player.y = H - 140;
  // set default overlay visible
  overlay.style.display = 'flex';
  // draw a single frame pre-game
  draw();
}
init();

/* ---------- Save hi score periodically ---------- */
setInterval(()=>{ if(score > hiScore){ hiScore = Math.floor(score); localStorage.setItem('broom_hi', hiScore); hiScoreEl.textContent = hiScore; } }, 2000);

/* ---------- Make sure canvas sizes update when layout changes ---------- */
let obs = new ResizeObserver(()=>{ resize(); draw(); });
obs.observe(document.getElementById('gameArea'));

/* ---------- End of script ---------- */
</script>
</body>
</html>
